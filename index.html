  </style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo">TaxSees</div>
    <nav>
      <ul>
        <li><a class="active" href="#" data-tab="dashboard">Dashboard</a></li>
        <li><a href="#" data-tab="qr-scan">Scan QR</a></li>
        <li><a href="#" data-tab="projects">Projects</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="dashboard" class="tab-section active">
      <div class="background-filter"></div>
      <div class="content-container">
        <h2>2025 National Budget Breakdown</h2>
        <div class="chart-container">
          <canvas id="budgetChart"></canvas>
        </div>
        <ul>
          <li><strong>Total Budget:</strong> ₱6.33 Trillion</li>
          <li><strong>Education:</strong> ₱977.6 Billion</li>
          <li><strong>Public Works:</strong> ₱900 Billion</li>
          <li><strong>Health:</strong> ₱297.6 Billion</li>
          <li><strong>Social Welfare:</strong> ₱262 Billion</li>
          <li><strong>Infrastructure:</strong> ₱1.4 Trillion</li>
          <li><strong>Defense:</strong> ₱256.1 Billion</li>
        </ul>
      </div>
    </section>

    <section id="qr-scan" class="tab-section">
      <div class="background-filter"></div>
      <div class="content-container">
        <h2>Scan QR Code</h2>
        <h4>Scan QR codes to access real-time budget and project details.</h4>
        <div id="qr-reader" style="width: 300px;"></div>
        <input type="file" id="file-input" accept="image/*">
        <input type="text" id="manual-url" placeholder="Enter URL manually" style="margin-top: 1rem; padding: 0.5rem; width: 100%;">
        <button onclick="navigateToURL()" style="margin-top: 0.5rem; padding: 0.5rem 1rem;">Go</button>
      </div>
    </section>

    <section id="projects" class="tab-section">
      <div class="background-filter"></div>
      <div class="content-container">
        <h2>Project Dashboard</h2>
        <h4>Ongoing Projects</h4>
        <div id="project-list">Loading projects...</div>
        <input type="text" id="qr-input" placeholder="Paste QR URL or ID here" onkeydown="if(event.key==='Enter'){navigateToQR()}">
      </div>
    </section>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/html5-qrcode"></script>
<script>
  // Change Tab function (already included in your script)
  function changeTab(tabId) {
    document.querySelectorAll('.tab-section').forEach(section => section.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');

    document.querySelectorAll('nav ul li a').forEach(link => {
      link.classList.remove('active');
      if (link.dataset.tab === tabId) {
        link.classList.add('active');
      }
    });

    if (tabId === 'qr-scan') initializeQRScanner();
    if (tabId === 'projects') loadProjects();
  }

  async function loadData() {
    try {
      const response = await fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec');
      const data = await response.json();
      displayProjects(data);
    } catch (error) {
      console.error("Error fetching data:", error);
    }
  }

  function displayProjects(projects) {
    const projectList = document.getElementById('project-list');
    projectList.innerHTML = ''; // Clear existing content

    projects.forEach(project => {
      const projectItem = document.createElement('div');
      projectItem.innerHTML = `
        <h3>${project.name}</h3>
        <p>Status: ${project.status}</p>
        <p>Budget: ${project.budget}</p>
        <p>Contractor: ${project.contractor}</p>
        <p>Description: ${project.description}</p>
        <p>Engineer: ${project.engineer}</p>
        <p>Start Date: ${project.startDate}</p>
      `;
      projectList.appendChild(projectItem);
    });
  }

  window.onload = loadData;

  function navigateToURL() {
    const url = document.getElementById('manual-url').value;
    if (url) window.location.href = url;
  }

  function onScanSuccess(decodedText) {
    window.location.href = decodedText;
  }

  function onScanError(errorMessage) {
    console.warn(`QR Code Scan Error: ${errorMessage}`);
  }

  function initializeQRScanner() {
    const html5QrCode = new Html5Qrcode("qr-reader");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      onScanSuccess,
      onScanError
    ).catch(err => console.error(`Scanner error: ${err}`));
  }

  function navigateToQR() {
    const input = document.getElementById('qr-input').value;
    if (input.trim()) window.location.href = input;
  }

  window.addEventListener('load', () => {
    changeTab('dashboard'); // Default tab
  });
</script>
</body>
</html>
